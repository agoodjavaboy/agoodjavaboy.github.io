import{h as E,i as V,m as S,j as M,a as l,k as N,s as H,_ as F,l as f,o as U,g as C,n as a,c as _,p as g,r as v,f as k,t as d,F as b,d as P,q as O,w as m,b as s,e as Q}from"./index-BqzdYi8h.js";let x;const W={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let $=E({},W);function z(){({instance:x}=S({setup(){const{state:n,toggle:o}=M();return()=>l(H,N(n,{"onUpdate:show":o}),null)}}))}function G(r){return V?new Promise((n,o)=>{x||z(),x.open(E({},$,r,{callback:e=>{(e==="confirm"?n:o)(e)}}))}):Promise.resolve(void 0)}const J=r=>G(E({showCancelButton:!0},r)),K=(r,n,o)=>{const e=r[n];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((A,y)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(y.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})},X={key:0,style:{padding:"10px"}},Y={class:"question"},Z=["onClick"],ee=["innerHTML"],te={style:{"max-height":"60vh","overflow-y":"auto"}},ne=["onClick"],oe={__name:"exam",setup(r){const n=f(!1),o=f(""),e=f([]);U(async()=>{let u=C.currentRoute.value.query.code,i=C.currentRoute.value.query.title;o.value=i;const w=await A(u);e.value=w.sort(()=>Math.random()-.5),e.value.forEach(h=>{h.options.sort(()=>Math.random()-.5)})});const A=async u=>(await K(Object.assign({"../assets/course.json":()=>a(()=>import("./course-JH5wwQPu.js"),[]),"../assets/yy1.json":()=>a(()=>import("./yy1-d63TP30L.js"),[]),"../assets/yy2.json":()=>a(()=>import("./yy2-BcvoKwsZ.js"),[]),"../assets/yy3.json":()=>a(()=>import("./yy3-BAHrhmWj.js"),[]),"../assets/yy4.json":()=>a(()=>import("./yy4-BcZ2FF_n.js"),[]),"../assets/yy5.json":()=>a(()=>import("./yy5-SGjhpxPf.js"),[]),"../assets/yy6.json":()=>a(()=>import("./yy6-BkwuKqGR.js"),[]),"../assets/yy7.json":()=>a(()=>import("./yy7-9KTfypIw.js"),[])}),`../assets/${u}.json`,3)).default;function y(){J({title:"退出答题？",message:"确定退出答题吗？将不会保存任何数据。"}).then(()=>{C.replace({path:"/"})}).catch(()=>{})}const t=f(0);function D(){t.value<e.value.length-1&&t.value++}function T(){t.value>0&&t.value--}function B(u){e.value[t.value].finalAnswer||(e.value[t.value].finalAnswer=u,e.value[t.value].finalScore=u===e.value[t.value].answer,e.value[t.value].finalScore&&D())}return(u,i)=>{const w=v("van-nav-bar"),h=v("van-action-bar-icon"),I=v("van-action-bar-button"),L=v("van-action-bar"),q=v("van-col"),j=v("van-row"),R=v("van-dialog");return s(),_(b,null,[l(w,{title:o.value,"left-arrow":"",onClickLeft:y},null,8,["title"]),e.value.length>0?(s(),_("div",X,[k("p",Y," 第"+d(t.value+1)+"题: "+d(e.value[t.value].question),1),(s(!0),_(b,null,P(e.value[t.value].options,c=>(s(),_("p",{class:"option",key:c,onClick:p=>B(c)},d(c),9,Z))),128)),e.value[t.value].finalAnswer?(s(),_("p",{key:0,class:O(e.value[t.value].finalScore?"successAnswer":"errorAnswer")}," 正确答案："+d(e.value[t.value].answer)+"，你的答案："+d(e.value[t.value].finalAnswer),3)):g("",!0),e.value[t.value].finalAnswer?(s(),_("p",{key:1,innerHTML:e.value[t.value].explanationHtml},null,8,ee)):g("",!0)])):g("",!0),l(L,null,{default:m(()=>[l(h,{icon:"apps-o",text:"答题卡",onClick:i[0]||(i[0]=c=>n.value=!0)}),l(I,{type:"success",text:"上一题",onClick:T}),l(I,{type:"primary",text:"下一题",onClick:D})]),_:1}),l(R,{show:n.value,"onUpdate:show":i[1]||(i[1]=c=>n.value=c),title:"答题卡",confirmButtonText:"关闭"},{default:m(()=>[k("div",te,[l(j,{style:{padding:"10px 0px"}},{default:m(()=>[(s(!0),_(b,null,P(e.value,(c,p)=>(s(),Q(q,{span:"4",style:{display:"flex","justify-content":"center","align-items":"center",padding:"5px 0px"}},{default:m(()=>[k("div",{class:O(`questionItemInCard ${p===t.value?"correct":e.value[p].finalAnswer?e.value[p].finalScore?"successIndex":"errorIndex":""}`),onClick:()=>{t.value=p,n.value=!1}},d(p+1),11,ne)]),_:2},1024))),256))]),_:1})])]),_:1},8,["show"])],64)}}},se=F(oe,[["__scopeId","data-v-4fa5d885"]]);export{se as default};
