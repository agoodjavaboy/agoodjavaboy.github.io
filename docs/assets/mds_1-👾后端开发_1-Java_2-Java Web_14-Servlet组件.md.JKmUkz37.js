import{_ as i,c as a,o as n,aF as t}from"./chunks/framework.CvyoTX4A.js";const g=JSON.parse('{"title":"Servletç»„ä»¶","description":"","frontmatter":{},"headers":[],"relativePath":"mds/1-ğŸ‘¾åç«¯å¼€å‘/1-Java/2-Java Web/14-Servletç»„ä»¶.md","filePath":"mds/1-ğŸ‘¾åç«¯å¼€å‘/1-Java/2-Java Web/14-Servletç»„ä»¶.md"}'),l={name:"mds/1-ğŸ‘¾åç«¯å¼€å‘/1-Java/2-Java Web/14-Servletç»„ä»¶.md"};function h(k,s,p,e,E,r){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="servletç»„ä»¶" tabindex="-1">Servletç»„ä»¶ <a class="header-anchor" href="#servletç»„ä»¶" aria-label="Permalink to &quot;Servletç»„ä»¶&quot;">â€‹</a></h1><h2 id="è¿‡æ»¤å™¨" tabindex="-1">è¿‡æ»¤å™¨ <a class="header-anchor" href="#è¿‡æ»¤å™¨" aria-label="Permalink to &quot;è¿‡æ»¤å™¨&quot;">â€‹</a></h2><ul><li><p>å¯ä»¥æŒ‡å®šè¿‡æ»¤è¯·æ±‚æˆ–è€…èµ„æºã€‚</p></li><li><p>åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œå¯ä»¥å¯¹requestå¯¹è±¡å’Œresponseå¯¹è±¡ä¸­çš„å†…å®¹è¿›è¡Œæ“ä½œï¼Œå…·æœ‰è¯·æ±‚å’Œå“åº”çš„åŠŸèƒ½ã€‚</p></li><li><p>åœ¨æ‰§è¡Œä¸€æ¡è¯·æ±‚çš„æ—¶å€™ï¼Œæ˜¯å…ˆç»è¿‡è¿‡æ»¤å™¨ä¹‹åå†ç»è¿‡Servletç±»ï¼Œå¯ä»¥åœ¨æ‰§è¡ŒServletç±»ä¹‹å‰ï¼Œåšä¸€äº›æ£€æµ‹æˆ–è€…æ“ä½œã€‚</p></li><li><p>è¿‡æ»¤å™¨çš„åˆ›å»ºï¼Œæ˜¯å®ç°Filteræ¥å£å³å¯ï¼Œæ‰€æœ‰å®ç°äº†Filteræ¥å£çš„ç±»ï¼Œéƒ½æ˜¯è¿‡æ»¤å™¨ç±»ã€‚</p></li><li><p>ä¸€ä¸ªServletè¯·æ±‚å¯èƒ½ä¼šæœ‰å¤šä¸ªè¿‡æ»¤å™¨æ£€æŸ¥ï¼Œå¤šä¸ªè¿‡æ»¤å™¨æ˜¯ä¼šæ’é˜Ÿä¸€ä¸ªä¸€ä¸ªçš„è¿›è¡Œè¿è¡Œçš„ã€‚</p></li><li><p>Filterç±»ä¸­å­˜åœ¨ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•ä¸Servletæ¥å£ä¸­çš„æ–¹æ³•ç›¸ä¼¼ï¼Œè¡¨ç¤ºä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸã€‚æ‰€æœ‰çš„æ–¹æ³•éƒ½ç”±æœåŠ¡å™¨åœ¨è°ƒç”¨Servletä¹‹å‰è‡ªåŠ¨çš„è°ƒç”¨ã€‚</p></li></ul><table tabindex="0"><thead><tr><th>æ–¹æ³•å</th><th>æ–¹æ³•å«ä¹‰</th></tr></thead><tbody><tr><td><code>init(FilterConfig arg0)</code></td><td>åˆå§‹åŒ–çš„æ–¹æ³•ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡</td></tr><tr><td><code>doFilter(ServletRequest arg0, ServletResponse arg1,FilterChain arg2)</code></td><td>ä¸serviceæ–¹æ³•ç›¸åŒï¼Œä¸»è¦çš„ä»£ç æ‰€åœ¨åœ°</td></tr><tr><td><code>destroy()</code></td><td>æ¯ç­çš„æ–¹æ³•ï¼Œè‡ªåŠ¨è°ƒç”¨</td></tr></tbody></table><blockquote><p>ServletRequestï¼šè¡¨ç¤ºè¯·æ±‚çš„å†…å®¹ï¼Œéƒ½å°è£…åœ¨é‡Œé¢ã€‚</p><p>ServletResponseï¼šå“åº”çš„æƒåˆ©å’ŒåŠ¨ä½œï¼Œéƒ½å¯ä»¥é€šè¿‡æ­¤å¯¹è±¡æ‰§è¡Œã€‚</p><p>FilterChainï¼šæ§åˆ¶æ”¾è¡Œã€‚doFilteræ–¹æ³•å°†æ‰§è¡Œä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æˆ–è€…æ‰§è¡ŒServletç±»ã€‚</p></blockquote><ul><li>è¿‡æ»¤å™¨éœ€è¦é…ç½®ç›¸å…³çš„è·¯å¾„ï¼Œä¹Ÿå­˜åœ¨xmlé…ç½®æ–¹å¼å’Œæ³¨è§£çš„é…ç½®æ–¹å¼ï¼Œè·¯å¾„ä¹Ÿè¦ç”¨/å¼€å¤´ã€‚</li><li>åœ¨è·¯å¾„é…ç½®çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨*å·ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„è¯·æ±‚éƒ½æ‹¦æˆªã€‚</li><li>åœ¨è¿›è¡Œè·¯å¾„é…ç½®çš„æ—¶å€™ï¼Œæ³¨è§£çš„æ–¹å¼å’Œxmlé…ç½®çš„æ–¹å¼åœ¨åŒä¸€ä¸ªè¿‡æ»¤å™¨ä¸­åªèƒ½ç”¨ä¸€ä¸ªã€‚</li></ul><h3 id="ä»£ç ç¤ºä¾‹" tabindex="-1">ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#ä»£ç ç¤ºä¾‹" aria-label="Permalink to &quot;ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h3><h4 id="ç»Ÿä¸€ç¼–ç ä¿®æ”¹" tabindex="-1">ç»Ÿä¸€ç¼–ç ä¿®æ”¹ <a class="header-anchor" href="#ç»Ÿä¸€ç¼–ç ä¿®æ”¹" aria-label="Permalink to &quot;ç»Ÿä¸€ç¼–ç ä¿®æ”¹&quot;">â€‹</a></h4><ol><li>å®ç°Filteræ¥å£ã€‚</li><li>é‡å†™å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚</li><li>åœ¨doFilteræ–¹æ³•ä¸­ï¼Œå¯¹ä¼ å…¥çš„è¯·æ±‚ä¸å“åº”è¿›è¡Œç¼–ç ä¿®æ”¹ã€‚</li><li>å°†åŸå§‹çš„requestå’Œresponseå¯¹è±¡è½¬æ¢æˆHTTPä¸“ç”¨çš„å¯¹è±¡ã€‚</li><li>ä½¿ç”¨chainçš„doFilteræ–¹æ³•ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æˆ–è€…æ‰§è¡Œç›®æ ‡Servletï¼ˆè¦ä¼ å…¥è½¬æ¢äº†ç±»å‹ä¹‹åçš„httpè¯·æ±‚ä¸å“åº”å¯¹è±¡ï¼‰ã€‚</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			FilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException, ServletException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//æ›´æ”¹ç¼–ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCharacterEncoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCharacterEncoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//å› ä¸ºç°åœ¨é¡¹ç›®ä¸­ç”¨çš„è¯·æ±‚éƒ½æ˜¯httpçš„ï¼Œè€Œä¼ æ¥çš„å‚æ•°éƒ½æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥è¿›è¡Œä¸€æ¬¡è½¬æ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpServletRequest req </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletRequest)request;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpServletResponse resp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletResponse)response;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(FilterConfig </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ServletException {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="æ˜¯å¦ç™»å½•æ£€æµ‹" tabindex="-1">æ˜¯å¦ç™»å½•æ£€æµ‹ <a class="header-anchor" href="#æ˜¯å¦ç™»å½•æ£€æµ‹" aria-label="Permalink to &quot;æ˜¯å¦ç™»å½•æ£€æµ‹&quot;">â€‹</a></h4><ol><li>å®ç°äº†Filteræ¥å£ã€‚</li><li>é‡å†™å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚</li><li>åœ¨doFIlterä¸­ï¼Œå°†è¯·æ±‚ä¸å“åº”å¯¹è±¡è½¬å‹ä¸ºHttpä¸“ç”¨çš„ï¼Œå› ä¸ºåŸå§‹çš„è¯·æ±‚ä¸å“åº”å¯¹è±¡æ˜¯æ— æ³•è·å¾—Sessionçš„ã€‚</li><li>åˆ¤æ–­sessionä¸­æ˜¯å¦å­˜åœ¨ï¼šåªæœ‰ç™»å½•æ‰ä¼šå­˜åœ¨çš„æ ‡è¯†ã€‚</li><li>å¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡è¯†ï¼Œåˆ™è·³è½¬å»ç™»å½•ã€‚</li><li>å¦‚æœæœ‰è¿™ä¸ªæ ‡è¯†ï¼Œåˆ™ç»§ç»­æ‰§è¡Œç›®æ ‡Servletæˆ–è€…ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ã€‚</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			FilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException, ServletException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//åŸå§‹çš„requestå¯¹è±¡æ— æ³•è·å¾—sessionï¼Œè¦è½¬æ¢ä¹‹åå†å»ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//å› ä¸ºç°åœ¨é¡¹ç›®ä¸­ç”¨çš„è¯·æ±‚éƒ½æ˜¯httpçš„ï¼Œè€Œä¼ æ¥çš„å‚æ•°éƒ½æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥è¿›è¡Œä¸€æ¬¡è½¬æ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpServletRequest req </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletRequest)request;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpServletResponse resp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletResponse)response;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//æ£€æµ‹æ˜¯å¦ç™»å½•ï¼šæ ¹æ®ç™»å½•æ—¶å¾€sessionä¸­å­˜å‚¨çš„keyå–å‡ºvalueå¦‚æœä¸ä¸ºç©ºåˆ™è¡¨ç¤ºå·²ç»ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpSession hs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		Object user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loginUser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å‡è®¾å½“æ—¶ç™»å½•å­˜å‚¨çš„æ˜¯loginUserä¸ºkey</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¦‚æœä¸ºç©ºåˆ™è¡¨ç¤ºæ²¡æœ‰ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendRedirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;login.html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			//æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(FilterConfig </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ServletException {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="å¿½ç•¥éƒ¨åˆ†è¯·æ±‚" tabindex="-1">å¿½ç•¥éƒ¨åˆ†è¯·æ±‚ <a class="header-anchor" href="#å¿½ç•¥éƒ¨åˆ†è¯·æ±‚" aria-label="Permalink to &quot;å¿½ç•¥éƒ¨åˆ†è¯·æ±‚&quot;">â€‹</a></h4><ul><li>ä½¿ç”¨é›†åˆä¸æ£€ç´¢æ–¹æ³•ï¼Œå¯¹å¿½ç•¥çš„è¯·æ±‚è¿›è¡Œæ”¾è¡Œï¼Œæœªå¿½ç•¥çš„æ‰ä¼šè¿›è¡Œæ£€æµ‹ã€‚</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åœ¨æ‹¦æˆªæ‰€æœ‰è¯·æ±‚çš„å‰æä¸‹ï¼Œè¿›è¡Œéƒ¨åˆ†è¯·æ±‚çš„æ”¾è¡Œï¼š@WebFilter(&quot;/*&quot;)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletRequest request, ServletResponse response,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                     FilterChain chain) throws IOException, ServletException {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è¿›è¡Œè¯·æ±‚å’Œå“åº”çš„è½¬å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HttpServletRequest req </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletRequest)request;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HttpServletResponse resp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletResponse)response;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequestURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;==&gt;è¿›è¡Œç™»å½•æ£€æµ‹è¿‡æ»¤ï¼šsession&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è·å¾—é¡¹ç›®å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String contextname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getServletContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getServletContextName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å°†å¿½ç•¥çš„è·¯å¾„æ‹¼æ¥ä¸Šé¡¹ç›®åä¹¦å†™åœ¨é›†åˆä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ArrayList&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¿½ç•¥é¦–é¡µåŠé¦–é¡µçš„å›¾ç‰‡å’Œcssç­‰èµ„æº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/login.jsp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/skin.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/logo.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/icon-demo.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/icon-login-seaver.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/luck.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/login-wel.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/login_bg.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/login-top-bg.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/login-content-bg.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/login-buttom-bg.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¿½ç•¥é¦–é¡µå‘å‡ºçš„ç™»å½•è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/userlogin.do&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¿½ç•¥å›¾ç‰‡éªŒè¯ç çš„å›¾ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/KaptchaServlet.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¿½ç•¥è‡ªåŠ¨ç™»å½•è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/welcome.do&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è·å¾—è¢«æ‹¦æˆªçš„è¯·æ±‚å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String uri </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequestURI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //åˆ¤æ–­æ­¤æ¬¡æ‹¦æˆªçš„è¯·æ±‚æ˜¯å¦æ˜¯å¿½ç•¥è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isChain </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contains</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uri);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(isChain){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¦‚æœä¸æ˜¯ï¼Œåˆ™å¼€å§‹ç™»å½•æ£€æµ‹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å–å‡ºsessionä¸­åŒ…å«çš„ç™»å½•å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Object o </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loginUser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(o </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¦‚æœæ­¤å¯¹è±¡ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæœªç™»å½•æˆ–å·²è¿‡æœŸï¼Œåˆ™è·³è½¬é¦–é¡µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç™»å½•è¿‡æœŸï¼Œé‡æ–°ç™»å½•ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendRedirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;login.jsp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¦‚æœå­˜åœ¨æ­¤å¯¹è±¡ï¼Œåˆ™æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="è·¯å¾„é…ç½®" tabindex="-1">è·¯å¾„é…ç½® <a class="header-anchor" href="#è·¯å¾„é…ç½®" aria-label="Permalink to &quot;è·¯å¾„é…ç½®&quot;">â€‹</a></h3><h4 id="ä½¿ç”¨æ³¨è§£é…ç½®è¿‡æ»¤å™¨" tabindex="-1">ä½¿ç”¨æ³¨è§£é…ç½®è¿‡æ»¤å™¨ <a class="header-anchor" href="#ä½¿ç”¨æ³¨è§£é…ç½®è¿‡æ»¤å™¨" aria-label="Permalink to &quot;ä½¿ç”¨æ³¨è§£é…ç½®è¿‡æ»¤å™¨&quot;">â€‹</a></h4><ul><li>å°†åœ¨æ¥æ”¶åˆ°main.htmlè¿™ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæ‰§è¡Œè¿‡æ»¤å™¨ï¼Œå†å†³å®šæ˜¯å¦è¦æ˜¾ç¤ºå†…å®¹ã€‚</li><li>å¦‚æœæ²¡æœ‰ç™»å½•ï¼ˆsessionä¸­æ²¡æœ‰å€¼ï¼‰ï¼Œå°±ä¼šå¼ºåˆ¶è¿›å…¥ç™»å½•é¡µé¢ï¼Œå¦åˆ™æ‰ä¼šæ”¾è¡Œã€‚</li><li>åœ¨å¤§æ‹¬å·ä¸­ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªè·¯å¾„è¯·æ±‚ï¼Œæ— è®ºæ˜¯HTMLè¿˜æ˜¯jspè¿˜æ˜¯.doè¯·æ±‚ã€‚</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WebFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">urlPatterns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/main.html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			FilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException, ServletException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//åŸå§‹çš„requestå¯¹è±¡æ— æ³•è·å¾—sessionï¼Œè¦è½¬æ¢ä¹‹åå†å»ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//å› ä¸ºç°åœ¨é¡¹ç›®ä¸­ç”¨çš„è¯·æ±‚éƒ½æ˜¯httpçš„ï¼Œè€Œä¼ æ¥çš„å‚æ•°éƒ½æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥è¿›è¡Œä¸€æ¬¡è½¬æ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpServletRequest req </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletRequest)request;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpServletResponse resp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HttpServletResponse)response;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//æ£€æµ‹æ˜¯å¦ç™»å½•ï¼šæ ¹æ®ç™»å½•æ—¶å¾€sessionä¸­å­˜å‚¨çš„keyå–å‡ºvalueå¦‚æœä¸ä¸ºç©ºåˆ™è¡¨ç¤ºå·²ç»ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		HttpSession hs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		Object user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loginUser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å‡è®¾å½“æ—¶ç™»å½•å­˜å‚¨çš„æ˜¯loginUserä¸ºkey</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¦‚æœä¸ºç©ºåˆ™è¡¨ç¤ºæ²¡æœ‰ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendRedirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;login.jsp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			//æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(FilterConfig </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ServletException {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="ä½¿ç”¨xmlæ–‡ä»¶é…ç½®è¿‡æ»¤å™¨" tabindex="-1">ä½¿ç”¨xmlæ–‡ä»¶é…ç½®è¿‡æ»¤å™¨ <a class="header-anchor" href="#ä½¿ç”¨xmlæ–‡ä»¶é…ç½®è¿‡æ»¤å™¨" aria-label="Permalink to &quot;ä½¿ç”¨xmlæ–‡ä»¶é…ç½®è¿‡æ»¤å™¨&quot;">â€‹</a></h4><ul><li>ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ä¸é…ç½®Servletéå¸¸ç›¸ä¼¼ã€‚</li><li>åœ¨&lt;url-pattern&gt;æ ‡ç­¾ä¸­é…ç½®çš„æ˜¯æ‹¦æˆªçš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥å†™æˆâ€œ/*â€ï¼Œè¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ã€‚</li></ul><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;TestFilter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.xx.filter.TestFilter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-mapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;TestFilter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url-pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;/main.html&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url-pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filter-mapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="ç›‘å¬å™¨" tabindex="-1">ç›‘å¬å™¨ <a class="header-anchor" href="#ç›‘å¬å™¨" aria-label="Permalink to &quot;ç›‘å¬å™¨&quot;">â€‹</a></h2><ul><li><p>åœ¨Servletç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰å¾ˆå¤šçš„å¯¹è±¡çš„äº§ç”Ÿå’Œé”€æ¯ï¼Œå¹¶ä¸”å…¶ä¸­çš„å€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼ˆä¸‰å¤§ä½œç”¨åŸŸï¼‰ã€‚</p></li><li><p>ä½¿ç”¨ç›‘å¬å™¨å¯ä»¥ç›‘æ§ä½œç”¨åŸŸçš„åˆ›å»ºå’Œé”€æ¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿç›‘å¬ä½œç”¨åŸŸä¸­å€¼çš„å˜åŒ–ï¼ˆæ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼‰ã€‚</p></li><li><p>ç›‘å¬å™¨çš„åˆ›å»ºä¹Ÿæ˜¯é€šè¿‡å®ç°æ¥å£å¹¶é‡å†™æŠ½è±¡æ–¹æ³•çš„æ–¹å¼ï¼Œè¿˜è¦ä½¿ç”¨æ³¨è§£æˆ–è€…xmlé…ç½®æ–‡ä»¶è¿›è¡Œæ³¨å†Œï¼Œæ‰èƒ½å®é™…çš„ç›‘å¬ä¸€ä¸ªä½œç”¨åŸŸã€‚</p></li></ul><table tabindex="0"><thead><tr><th>æ¥å£å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>ServletContextListener</code></td><td>ç›‘å¬Contextä½œç”¨åŸŸåˆ›å»ºä¸é”€æ¯</td></tr><tr><td><code>HttpSessionListener</code></td><td>ç›‘å¬Sessionä½œç”¨åŸŸåˆ›å»ºä¸é”€æ¯</td></tr><tr><td><code>ServletRequestListener</code></td><td>ç›‘å¬Requestä½œç”¨åŸŸåˆ›å»ºä¸é”€æ¯</td></tr><tr><td><code>ServletContextAttributeListener</code></td><td>ç›‘å¬Contextä½œç”¨åŸŸä¸­å€¼çš„å˜åŒ–</td></tr><tr><td><code>HttpSessionAttributeListener</code></td><td>ç›‘å¬Sessionä½œç”¨åŸŸä¸­å€¼çš„å˜åŒ–</td></tr><tr><td><code>ServletRequestAttributeListener</code></td><td>ç›‘å¬Requestä½œç”¨åŸŸä¸­å€¼çš„å˜åŒ–</td></tr></tbody></table><blockquote><p>é€šè¿‡å®ç°ä»¥ä¸Šçš„æ¥å£ï¼Œé‡å†™å…¶ä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯¹ä½œç”¨åŸŸè¿›è¡Œç›‘æ§ï¼Œä½†å‰ææ˜¯å°†å…¶ä½¿ç”¨æ³¨è§£æˆ–è€…xmlé…ç½®çš„æ–¹å¼è¿›è¡Œäº†æ³¨å†Œã€‚</p></blockquote><h3 id="ä»£ç ç¤ºä¾‹-1" tabindex="-1">ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#ä»£ç ç¤ºä¾‹-1" aria-label="Permalink to &quot;ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h3><ul><li>ä»¥ä¸‹å±•ç¤ºå¯¹Contextä½œç”¨åŸŸäº§ç”Ÿã€é”€æ¯ä¸å€¼å˜åŒ–çš„ç›‘æ§ã€‚</li><li>å…¶ä»–ä½œç”¨åŸŸçš„ç›‘æ§éƒ½æ˜¯ç±»ä¼¼çš„ä¹¦å†™æ–¹å¼ï¼Œåªä¸è¿‡å®ç°çš„æ¥å£æ¢ä¸€æ¢ã€‚</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//javaæ˜¯ä¸€ä¸ªå¯ä»¥å®ç°å¤šä¸ªæ¥å£çš„è¯­è¨€ï¼Œåœ¨å®ç°â€œç›‘å¬å‡ºç”Ÿä¸æ­»äº¡â€çš„æ¥å£åŸºç¡€ä¸Šï¼Œå†ç›‘å¬â€œä½œç”¨åŸŸå€¼å˜åŒ–â€çš„æ¥å£ï¼Œå°±å¯ä»¥åœ¨ä¸€ä¸ªç±»ä¸­å®Œæˆå¯¹åˆ›å»ºé”€æ¯åŠå€¼å˜åŒ–çš„ç›‘æ§</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WebListener</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	//æ­¤å¤„ä½¿ç”¨æ³¨è§£çš„æ–¹å¼å¯¹ç›‘å¬å™¨è¿›è¡Œæ³¨å†Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestContextListener</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServletContextListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServletContextAttributeListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> contextDestroyed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletContextEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Contextæ­»æ‰äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> contextInitialized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletContextEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Contextåˆ›å»ºäº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> attributeAdded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletContextAttributeEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½œç”¨åŸŸè¿›è¡Œäº†å­˜å€¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> attributeRemoved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletContextAttributeEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½œç”¨åŸŸè¿›è¡Œäº†å–å€¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> attributeReplaced</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletContextAttributeEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½œç”¨åŸŸä¸­å¾—å€¼è¿›è¡Œäº†ä¿®æ”¹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="æ³¨å†Œç›‘å¬å™¨" tabindex="-1">æ³¨å†Œç›‘å¬å™¨ <a class="header-anchor" href="#æ³¨å†Œç›‘å¬å™¨" aria-label="Permalink to &quot;æ³¨å†Œç›‘å¬å™¨&quot;">â€‹</a></h3><h4 id="ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ³¨å†Œç›‘å¬å™¨" tabindex="-1">ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ³¨å†Œç›‘å¬å™¨ <a class="header-anchor" href="#ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ³¨å†Œç›‘å¬å™¨" aria-label="Permalink to &quot;ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ³¨å†Œç›‘å¬å™¨&quot;">â€‹</a></h4><ul><li>å¯¹ç›‘å¬å™¨çš„æ³¨å†Œä¸éœ€è¦åŠ æ‹¬å·å¡«å†™å†…å®¹ã€‚</li><li>ä¸€æ—¦æ·»åŠ äº†æ­¤æ³¨è§£ï¼Œè¿™ä¸ªç±»å°±å°†æˆä¸ºä¸€ä¸ªç›‘å¬å¯¹è±¡çš„ç›‘å¬å™¨ï¼ˆä»¥ä¸‹æ¼”ç¤ºå¯¹Contextä½œç”¨åŸŸçš„ç›‘å¬ï¼‰ã€‚</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WebListener</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestContextListener</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServletContextListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServletContextAttributeListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="ä½¿ç”¨xmlæ–‡ä»¶æ³¨å†Œç›‘å¬å™¨" tabindex="-1">ä½¿ç”¨xmlæ–‡ä»¶æ³¨å†Œç›‘å¬å™¨ <a class="header-anchor" href="#ä½¿ç”¨xmlæ–‡ä»¶æ³¨å†Œç›‘å¬å™¨" aria-label="Permalink to &quot;ä½¿ç”¨xmlæ–‡ä»¶æ³¨å†Œç›‘å¬å™¨&quot;">â€‹</a></h4><ul><li>åœ¨web.xmlä¸­ï¼Œåœ¨&lt;web-app&gt;æ ‡ç­¾çš„é‡Œé¢ï¼Œå…¶ä»–æ ‡ç­¾çš„å¤–éƒ¨æ·»åŠ å¯¹ç›‘å¬å™¨æ³¨å†Œçš„æ ‡ç­¾ã€‚</li><li>ä½¿ç”¨&lt;listener&gt;æ ‡ç­¾è¿›è¡Œç›‘å¬å™¨æ³¨å†Œï¼Œå…¶ä¸­çš„&lt;listener-class&gt;ä¸­ä¹¦å†™ç›‘å¬å™¨çš„å…¨é™å®šåå³å¯ã€‚</li></ul><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">listener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">listener-class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.xx.listener.TestContextListener&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">listener-class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">listener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="å‚æ•°ä¸­çš„å¯¹è±¡" tabindex="-1">å‚æ•°ä¸­çš„å¯¹è±¡ <a class="header-anchor" href="#å‚æ•°ä¸­çš„å¯¹è±¡" aria-label="Permalink to &quot;å‚æ•°ä¸­çš„å¯¹è±¡&quot;">â€‹</a></h3><ul><li><p>ç›‘å¬å™¨ç›‘å¬æ–¹æ³•ä¸­ï¼Œå¯ä»¥æ¥æ”¶å„ç§äº‹ä»¶å¯¹è±¡ï¼Œä¸åŒçš„ç›‘å¬å™¨æ‹¥æœ‰ä¸åŒçš„å¯¹è±¡ç±»å‹ã€‚</p></li><li><p>æ‰€æœ‰çš„äº‹ä»¶å¯¹è±¡éƒ½ä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥æ–¹æ³•ä¸­ï¼Œä»¥Eventå•è¯ç»“å°¾ã€‚</p></li><li><p>æ‰€æœ‰çš„äº‹ä»¶å¯¹è±¡éƒ½ç»§æ‰¿è‡ªEventObjectï¼Œæ¥è‡ªjavaçš„utilåŒ…ä¸‹ã€‚</p></li><li><p>ServletContextEvent/ServletRequestEvent/HttpSessionEventéƒ½ç»§æ‰¿è‡ªEventObjectå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡è¿™äº›å¼•ç”¨è·å¾—äº‹ä»¶å‘ç”Ÿçš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥è·å¾—å·²ç»ä¿®æ”¹ä¹‹åçš„å¯¹è±¡ã€‚</p></li><li><p>åœ¨è¿›è¡Œä½œç”¨åŸŸä¸­å€¼ç›‘æ§çš„æ—¶å€™ï¼Œè¿˜ä¼šå‡ºç°ServletContextBindingEvent/HttpSessionBindingEvent/ServletRequestBindingEventå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ç»§æ‰¿è‡ªServletContextEvent/ServletRequestEvent/HttpSessionEventå¯¹è±¡ï¼Œé—´æ¥çš„ç»§æ‰¿äº†EventObjectå¯¹è±¡ï¼Œåœ¨å¯ä»¥è·å–çˆ¶ç±»ä¸­æ–¹æ³•çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥è·å¾—ä¿®æ”¹/æ·»åŠ /åˆ é™¤çš„ä½œç”¨åŸŸä¸­çš„å€¼çš„keyæˆ–è€…valueï¼Œå¯¹åº”getNameå’ŒgetValueæ–¹æ³•ã€‚</p></li></ul>`,39)]))}const y=i(l,[["render",h]]);export{g as __pageData,y as default};
