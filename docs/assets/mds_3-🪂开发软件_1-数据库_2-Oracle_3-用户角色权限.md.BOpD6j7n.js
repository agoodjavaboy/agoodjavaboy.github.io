import{_ as l,C as e,c as n,o as h,aF as i,j as a,G as p,w as k,a as d}from"./chunks/framework.CvyoTX4A.js";const A=JSON.parse('{"title":"用户角色权限","description":"","frontmatter":{},"headers":[],"relativePath":"mds/3-🪂开发软件/1-数据库/2-Oracle/3-用户角色权限.md","filePath":"mds/3-🪂开发软件/1-数据库/2-Oracle/3-用户角色权限.md"}'),r={name:"mds/3-🪂开发软件/1-数据库/2-Oracle/3-用户角色权限.md"};function o(g,s,c,E,y,u){const t=e("font");return h(),n("div",null,[s[3]||(s[3]=i('<h1 id="用户角色权限" tabindex="-1">用户角色权限 <a class="header-anchor" href="#用户角色权限" aria-label="Permalink to &quot;用户角色权限&quot;">​</a></h1><h2 id="oracle" tabindex="-1">Oracle <a class="header-anchor" href="#oracle" aria-label="Permalink to &quot;Oracle&quot;">​</a></h2><h3 id="用户" tabindex="-1">用户 <a class="header-anchor" href="#用户" aria-label="Permalink to &quot;用户&quot;">​</a></h3><h4 id="内置用户" tabindex="-1">内置用户 <a class="header-anchor" href="#内置用户" aria-label="Permalink to &quot;内置用户&quot;">​</a></h4><table tabindex="0"><thead><tr><th>用户名</th><th>密码</th><th>描述</th></tr></thead><tbody><tr><td>ANONYMOUS</td><td>ANONYMOUS</td><td>访问http的匿名用户帐户</td></tr><tr><td>CTXSYS</td><td>CTXSYS</td><td>interMedia Text用户</td></tr><tr><td>DBSNMP</td><td>DBSNMP</td><td>目录集成平台用户</td></tr><tr><td>EXFSYS</td><td>EXFSYS</td><td>表达式过滤器用户</td></tr><tr><td>MDDATA</td><td>MDDATA</td><td>oracle空间数据帐户</td></tr><tr><td>MDSYS</td><td>MDSYS</td><td>oracle空间数据媒体管理员</td></tr><tr><td>MGMT_VIEW</td><td>MGMT_VIEW</td><td></td></tr><tr><td>OLAPSYS</td><td>MANGER</td><td>用于创建olap元数据</td></tr><tr><td>ORDPLUGINS</td><td>ORDPLUGINS</td><td>oracle ineterMedia,video用户</td></tr><tr><td>ORDSYS</td><td>ORDSYS</td><td>image管理员</td></tr><tr><td>OUTLN</td><td>OUTLN</td><td>拥有connect和resource角色</td></tr><tr><td>SCOTT</td><td>Tiger</td><td>样例帐户</td></tr><tr><td>SI_INFORMATN_SCHEMA</td><td></td><td>静止图像浏览帐户</td></tr><tr><td>SYS</td><td>用户指定</td><td>数据库管理帐户</td></tr><tr><td>SYSMAN</td><td>OEM_TEMP</td><td>企业管理器帐户</td></tr><tr><td>SYSTEM</td><td>用户指定</td><td>数据库管理帐户</td></tr><tr><td>WK_TEST</td><td>WK_TEST</td><td>同wksys</td></tr><tr><td>WKPROXY</td><td></td><td>代理帐户</td></tr><tr><td>WKSYS</td><td>WKSYS</td><td>同wk_test</td></tr><tr><td>WMSYS</td><td>WMSYS</td><td>工作空间管理帐户</td></tr><tr><td>XDB</td><td>CHANGE_ON_INSTALL</td><td>xml db帐户</td></tr></tbody></table><ol><li>oracle中的帐户分为两类:一类是必需的帐户,一类是存储各种应用的帐户。</li><li>数据库的启动需要以SYSDBA/SYSOPER身份登录。</li><li>如果在同一主机上使用IPC连接到数据库使用操作系统授权，登录任何一个用户都可以拥有as sysdba和as sysoper。</li><li>sys和system用户的区别 SYS用户具有DBA权限，并具有SYS模式。只能通过SYSDBA登录数据库，是Oracle数据库中权限最高的帐号。sys用户具有“SYSDBA”和“SYSOPER”权限，登陆em时也只能用这两个身份，不能用normal。而system登录em时只能用normal模式登录。sys拥有数据字典(dictionary),或者说dictionary属于sys schema。 system用户具有DBA权限，但是没有SYSDBA权限。平常一般用该帐号管理数据库。登录em时只能使用normal登录。</li><li>SYSDBA权限和SYSOPER权限区别 “SYSOPER”权限，即数据库操作员权限，sysoper主要用来启动、关闭数据库，sysoper 登陆后用户是 public。权限包括：打开数据库(STARTUP, ALTER DATABASE OPEN/MOUNT/OPEN),服务器(CREATE SPFILE,etc) 关闭数据库服务器 备份数据库 恢复数据库RECOVERY 日志归档ARCHIVELOG 会话限制RESTRICTED SESSION</li></ol><h4 id="创建用户" tabindex="-1">创建用户 <a class="header-anchor" href="#创建用户" aria-label="Permalink to &quot;创建用户&quot;">​</a></h4>',7)),a("ul",null,[s[1]||(s[1]=i('<li><p>Oracle内部有两个内置的用户:system和sys.用户可以直接登录到system来创建其他的用户.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> user</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 用户名</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> identified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 口令;</span></span></code></pre></div></li>',1)),a("li",null,[p(t,{color:"red"},{default:k(()=>s[0]||(s[0]=[d("所有新建的用户，在数据库中存储都以字母大写方式存储。")])),_:1})]),s[2]||(s[2]=i('<li><p>创建用户之后，无法直接进行登录，需要进行授权才能有登录的功能。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--create session表示连接数据库的权限</span></span></code></pre></div></li>',1))]),s[4]||(s[4]=i(`<h4 id="更改密码" tabindex="-1">更改密码 <a class="header-anchor" href="#更改密码" aria-label="Permalink to &quot;更改密码&quot;">​</a></h4><ul><li><p>可以在system身份登录下,更改已有用户的密码.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">alter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名 identified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 新口令;</span></span></code></pre></div></li></ul><h4 id="解封用户" tabindex="-1">解封用户 <a class="header-anchor" href="#解封用户" aria-label="Permalink to &quot;解封用户&quot;">​</a></h4><ul><li><p>所有的Oracle数据库中默认存在一个管理员身份用户HR,此用户默认是封锁状态,可以将此用户解封使用.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">alter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名 account </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li><li><p>如果一个用户在多次输入密码错误的情况下,也会出现封锁的情况,可以设置用户的密码无限次尝试登陆而不会被封锁.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">alter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> limit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> failed_login_attempts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">unlimited</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li><li><p>数据库的密码在一定时间内会发生过期,可以设置密码存活时间设置为不过期.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">alter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> limit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> password_life_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">unlimited</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li></ul><h4 id="删除用户" tabindex="-1">删除用户 <a class="header-anchor" href="#删除用户" aria-label="Permalink to &quot;删除用户&quot;">​</a></h4><ul><li><p>如果用户拥有表，视图等数据库对象时不能直接删除,否则会返回一个错误值.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">drop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span></span></code></pre></div></li><li><p>可以使用cascade关键字,删除用户的所有对象,然后再删除用户.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">drop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名 cascade;</span></span></code></pre></div></li></ul><h4 id="查看所有用户" tabindex="-1">查看所有用户 <a class="header-anchor" href="#查看所有用户" aria-label="Permalink to &quot;查看所有用户&quot;">​</a></h4><ul><li><p>查询oracle中所有用户信息：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dba_users; </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> all_users; </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user_users;</span></span></code></pre></div></li><li><p>只查询用户和密码：<code>select username,password from dba_users;</code></p></li><li><p>查询当前用户信息：<code>select * from dba_ustats;</code></p></li><li><p>查询用户可以访问的视图文本：<code>select * from dba_varrays;</code></p></li></ul><h3 id="角色" tabindex="-1">角色 <a class="header-anchor" href="#角色" aria-label="Permalink to &quot;角色&quot;">​</a></h3><h4 id="内置角色" tabindex="-1">内置角色 <a class="header-anchor" href="#内置角色" aria-label="Permalink to &quot;内置角色&quot;">​</a></h4><ul><li><strong>connect</strong><ul><li>临时角色,不需要建表的用户.</li><li>connect是使用Oracle简单权限,只对其他用户的表有访问权限,包括select/insert/update/delete等.</li><li>拥有connect的用户能够创建表/视图/序列/簇/同义词/会话和其他数据的链.</li></ul></li><li><strong>resource</strong><ul><li>更可靠和正式的数据库用户.</li><li>resource提供给用户另外的权限以创建他们自己的表/序列/过程/触发器/索引和簇.</li></ul></li><li><strong>dba</strong><ul><li>拥有所有的系统权限.</li><li>包括无限制的空间限额和给其他用户授予各种权限的能力.system就是dba用户.</li></ul></li></ul><h4 id="给用户授权角色" tabindex="-1">给用户授权角色 <a class="header-anchor" href="#给用户授权角色" aria-label="Permalink to &quot;给用户授权角色&quot;">​</a></h4><ul><li><p>授权,可以对一个用户同时赋予多个能力.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 角色名,角色名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span></span></code></pre></div></li></ul><h4 id="撤销用户的角色" tabindex="-1">撤销用户的角色 <a class="header-anchor" href="#撤销用户的角色" aria-label="Permalink to &quot;撤销用户的角色&quot;">​</a></h4><ul><li><p>撤销授权,可以同时撤销一个用户的多个能力.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">revoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 角色名,角色名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span></span></code></pre></div></li></ul><h4 id="创建角色" tabindex="-1">创建角色 <a class="header-anchor" href="#创建角色" aria-label="Permalink to &quot;创建角色&quot;">​</a></h4><ul><li>除了数据库自带的三种系统角色外,用户还可以自定义角色.</li><li>角色被称为role,用户创建的role可以由表或系统权限或者两者的结合构成.</li><li>为了创建role,用户必须获得创建角色的系统权限.</li></ul><ul><li>创建角色之后,在为用户赋予角色的时候就可以在connect/resource/dba之外制定自定义的角色了.</li></ul><p><strong>建立不需要验证的公用角色：</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 角色名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> identified;</span></span></code></pre></div><p><strong>建立需要数据库验证的角色：</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 角色名 identified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 密码;</span></span></code></pre></div><h4 id="角色权限授权" tabindex="-1">角色权限授权 <a class="header-anchor" href="#角色权限授权" aria-label="Permalink to &quot;角色权限授权&quot;">​</a></h4><ul><li><p>在给角色赋予权限时,可以通过操作/表名的方式来进行控制.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 操作(增删改查) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 表名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 角色名;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> class </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testRole;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--testRole拥有class表的所有select操作权限</span></span></code></pre></div></li></ul><h4 id="删除角色" tabindex="-1">删除角色 <a class="header-anchor" href="#删除角色" aria-label="Permalink to &quot;删除角色&quot;">​</a></h4><ul><li><p>删除角色将删除所有此角色所涉及的用户的权限.</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">drop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 角色名;</span></span></code></pre></div></li></ul><h4 id="显示角色信息" tabindex="-1">显示角色信息 <a class="header-anchor" href="#显示角色信息" aria-label="Permalink to &quot;显示角色信息&quot;">​</a></h4><p><strong>显示所有角色</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dba_roles;</span></span></code></pre></div><p><strong>显示角色具有的系统权限</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> role_sys_privs;</span></span></code></pre></div><p><strong>显示角色具有的对象权限</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dba_tab_privs;</span></span></code></pre></div><p><strong>显示用户具有的角色，及默认角色</strong></p><p>当以用户的身份连接到数据库时，oracle会自动的激活默认的角色，通过查询数据字典视图dba_role_privs可以显示某个用户具有的所有角色及当前默认的角色</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> granted_role, default_role </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dba_role_privs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> grantee </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;用户名&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="查看用户所拥有的角色" tabindex="-1">查看用户所拥有的角色 <a class="header-anchor" href="#查看用户所拥有的角色" aria-label="Permalink to &quot;查看用户所拥有的角色&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dba_role_privs;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user_role_privs;</span></span></code></pre></div><h3 id="权限" tabindex="-1">权限 <a class="header-anchor" href="#权限" aria-label="Permalink to &quot;权限&quot;">​</a></h3><h4 id="系统权限" tabindex="-1">系统权限 <a class="header-anchor" href="#系统权限" aria-label="Permalink to &quot;系统权限&quot;">​</a></h4><ol><li><p>数据库的权限分为：系统权限和对象权限。</p></li><li><p>系统权限指的是“执行特定SQL命令的权利”。</p></li><li><p>用于控制用户可以执行的一个或者一组数据库操作。</p></li><li><p>常用的权限如下，Oracle提供了100多种系统权限。</p><ul><li>连接数据库：create session</li><li>创建视图：create view</li><li>创建存储过程、函数、包：create procedure</li><li>创建簇：create cluster</li><li>创建表：create table</li><li>创建同义词：create public synonym</li><li>创建触发器：create trigger</li></ul></li></ol><h5 id="查看所有系统权限" tabindex="-1">查看所有系统权限 <a class="header-anchor" href="#查看所有系统权限" aria-label="Permalink to &quot;查看所有系统权限&quot;">​</a></h5><p>使用<code>select * from system_privilege_map order by name; </code>来查看数据库中所有的权限。</p><h5 id="授予系统权限" tabindex="-1">授予系统权限 <a class="header-anchor" href="#授予系统权限" aria-label="Permalink to &quot;授予系统权限&quot;">​</a></h5><ol><li>一般情况，授予系统权限是由dba完成的，如果用其他用户来授予系统权限，则要求该用户必须具有grant any privilege的系统权限。</li><li>在授予系统权限时，可以带有with admin option选项，这样，被授予权限的用户或是角色还可以将该系统权限授予其它的用户或是角色。</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 权限, 权限 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">角色 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> admin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--将权限赋给指定用户，此用户也拥有支配此权限的能力</span></span></code></pre></div><h5 id="回收系统权限" tabindex="-1">回收系统权限 <a class="header-anchor" href="#回收系统权限" aria-label="Permalink to &quot;回收系统权限&quot;">​</a></h5><ol><li>一般情况下，回收系统权限是dba来完成的，如果其它的用户来回收系统权限，要求该用户必须具有相应系统权限及转授系统权限的选项（with admin option）。</li><li>回收系统权限使用revoke来完成。</li><li>当回收了系统权限后，用户就不能执行相应的操作了。</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">revoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 权限,权限 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">角色;</span></span></code></pre></div><h4 id="对象权限" tabindex="-1">对象权限 <a class="header-anchor" href="#对象权限" aria-label="Permalink to &quot;对象权限&quot;">​</a></h4><ol><li>对象权限指访问其它方案对象的权利；</li><li>用户可以直接访问自己方案的对象，但是如果要访问别的方案的对象，则必须具有对象的权限。</li><li>常用的对象权限有： <ul><li>alter：修改</li><li>delete：删除</li><li>select：查询</li><li>insert：添加</li><li>update：修改</li><li>index：索引</li><li>references：引用</li><li>execute：执行</li></ul></li></ol><h5 id="显示对象权限" tabindex="-1">显示对象权限 <a class="header-anchor" href="#显示对象权限" aria-label="Permalink to &quot;显示对象权限&quot;">​</a></h5><p>通过数据字段视图可以显示用户或是角色所具有的对象权限。视图为dba_tab_privs</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dba_tab_privs;</span></span></code></pre></div><h5 id="授予对象权限" tabindex="-1">授予对象权限 <a class="header-anchor" href="#授予对象权限" aria-label="Permalink to &quot;授予对象权限&quot;">​</a></h5><ol><li>在oracle9i以前，授予对象权限是由对象的所有者来完成的。</li><li>如果用其它的用户来操作，则需要用户具有相应的（with grant option）权限。</li><li>从oracle9i开始，dba用户（sys，system）可以将任何对象上的对象权限授予其它用户。</li><li>授予对象权限是用grant命令来完成的。</li><li>对象权限可以授予用户，角色，和public。</li><li>在授予权限时，如果带有with grant option选项，则可以将该权限转授给其它用户。</li><li>但要注意with grant option选项不能被授予角色。</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> select/update/delete</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 对象名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--此处的select/update/delete为对象权限</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 对象名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--一次性赋予权限</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> select/update/delete</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 表名(列名,列名) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--精准的进行列控制，而不是表控制</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> alter/execute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 对象名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--使用system、sys来进行修改和执行权限的赋予</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 对象名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--赋予创建索引的权限</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--with grant option:转授对象权限，该选项只能授予用户，不能授予角色。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQL&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn scott</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tiger; </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQL&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> emp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blake </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQL&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn black</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shunping </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SQL&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scott</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">emp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jones;</span></span></code></pre></div><h5 id="回收对象权限" tabindex="-1">回收对象权限 <a class="header-anchor" href="#回收对象权限" aria-label="Permalink to &quot;回收对象权限&quot;">​</a></h5><ol><li>在oracle9i中，收回对象的权限可以由对象的所有者来完成，也可以用dba用户（sys，system）来完成。</li><li>这里要说明的是：收回对象权限后，用户就不能执行相应的sql命令，但是要注意的是对象的权限会被级联收回。</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">revoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 权限 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 对象名 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户名;</span></span></code></pre></div><h4 id="查看用户或角色系统权限" tabindex="-1">查看用户或角色系统权限 <a class="header-anchor" href="#查看用户或角色系统权限" aria-label="Permalink to &quot;查看用户或角色系统权限&quot;">​</a></h4><p>直接赋值给用户或角色的系统权限</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dba_sys_privs;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user_sys_privs; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--查看当前用户所拥有的权限</span></span></code></pre></div>`,63))])}const D=l(r,[["render",o]]);export{A as __pageData,D as default};
